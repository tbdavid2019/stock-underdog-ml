# todo.md - 玄鐵重劍平均線策略 (Xuan Tie MA Strategy)

## I. 基礎環境與數據準備 (Environment & Data Setup)

- [ ] **1. 環境設定：** 選擇程式語言 (Python/R/JS) 並設置必要的財經數據庫/套件 (e.g., Pandas, Ta-lib, Tushare/yfinance)。
- [ ] **2. 數據獲取：** 獲取目標個股的歷史日線數據 (OHLCV - 開盤價、最高價、最低價、收盤價、成交量)。
- [ ] **3. 數據週期化處理 (可選/優化)：** 設計函數，能夠輕鬆將日線數據轉換為週線或月線數據，用於更高層次的趨勢判斷。

## II. 指標計算：價值中樞定義 (Indicator Calculation: Defining the Value Center)

根據影片中「長週期均線代表市場價值共識」的理念，我們需要定義兩條核心均線：

- [ ] **1. 長期移動平均線 (LMA - Major Trend/Value Center):**
    - [ ] 計算 **250 日移動平均線 (MA250)**。
    - *用途：* 代表長期的價值中樞，判斷「大勢」。
- [ ] **2. 中期移動平均線 (MMA - Shorter Value/Support):**
    - [ ] 計算 **60 日移動平均線 (MA60)** 或 **120 日移動平均線 (MA120)**。
    - *用途：* 作為長線趨勢中的短期波動支撐參考。
- [ ] **3. 短期移動平均線 (SMA - Minor Trend):**
    - [ ] 計算 **5 日移動平均線 (MA5)** 或 **10 日移動平均線 (MA10)**。
    - *用途：* 追蹤短期情緒波動，確認「小勢」回調。

## III. 策略邏輯實現：玄鐵重劍心法 (Strategy Logic Implementation)

核心策略為：**順大勢（價值上升） + 逆小勢（情緒回調）**

### A. 順大勢判斷 (Major Trend Assessment)

- [ ] **1. 趨勢方向判斷 (Filter 1 - 大勢向上):**
    - [ ] 檢查 LMA (MA250) 在過去 N 個交易日（例如 30 天）的斜率。
    - [ ] **條件：** LMA 必須持續向上傾斜 (或 LMA 當前值 > N 天前的 LMA 值)。
    - [ ] **補充條件：** 當前股價必須在 LMA 之上（確保整體處於上升週期）。

### B. 逆小勢入場點判斷 (Entry Signal Assessment)

- [ ] **2. 價值中樞迴歸判斷 (Filter 2 - 小勢回調):**
    - [ ] 檢查股價是否因情緒波動而跌回長/中期均線附近。
    - [ ] **入場條件 A (回踩長均線):** 當日收盤價 (Close) **接近或短暫跌破** LMA (MA250)。
        - *(註：可定義「接近」為 ±2% 範圍內。)*
    - [ ] **入場條件 B (測試中均線):** 當日收盤價 **接近或短暫跌破** MMA (MA60/120)。
- [ ] **3. 情緒極端過度判斷 (Optional Filter - 鐘擺極值):**
    - [ ] 檢查短期 MA (MA5/10) 是否在遠低於 LMA 的位置快速反轉向上。
    - *用途：* 捕捉市場極度恐懼後的快速均值迴歸。

### C. 綜合信號輸出 (Final Signal Generation)

- [ ] **4. 買入信號生成：**
    - [ ] 僅當 **Filter 1 (大勢向上)** 成立，且 **Filter 2 (小勢回調)** 成立時，發出買入信號 (`BUY_SIGNAL = TRUE`)。

## IV. 輸出演示與測試 (Output & Testing)

- [ ] **1. 輸出格式：** 建立一個結構化的輸出表格或圖表，包含：
    - [ ] 日期
    - [ ] 股價 (Close)
    - [ ] LMA, MMA (數值)
    - [ ] LMA 趨勢方向 (Up/Down)
    - [ ] 最終買入信號 (BUY/HOLD)
- [ ] **2. 回測實施 (Backtesting):** 選擇至少三個不同週期的上升個股進行歷史回測，驗證策略在 LMA 回踩點的表現。
- [ ] **3. 視覺化：** 繪製 K 線圖，並在圖上標註 LMA、MMA 線，以及所有觸發買入信號的點位，以便直觀驗證「玄鐵重劍」的有效性。